<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<title>Developing web interfaces for ROS(turtlebot)</title>
<meta name="description" content="Thoughts, reviews and ideas since 1999."/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<link rel="shortcut icon" href="#">
<link rel="stylesheet" type="text/css" href="assets/css/screen.css"/>
<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:400,300italic,300,400italic,700,700italic|Playfair+Display:400,700,400italic,700italic"/>
</head>
<body class="post-template">
<div class="site-wrapper">
	<nav class="main-nav overlay clearfix">
		<a class="blog-logo" href="../index.html"><img src="assets/img/page_logo.png" alt="Graduation Project"/></a>
		<ul id="menu">
		<li role="presentation"><a href="../index.html">Home</a></li>
		<li role="presentation"><a href="introduction.html">Project Introduction</a></li>
		<li role="presentation"><a href="developer.html">Developer</a></li>
		<li class="nav-current" role="presentation"><a href="control.html">Robot control</a></li>
		<span class="socialheader">
			<a href="https://github.com/IamYejin/Graduation-Project"><span class='symbol'>Github</span></a>
		</span>
	</ul>
	</nav>
	<header class="main-header post-head " style="background-image: url(assets/img/turtlebot_img.png)">
	<div class="vertical">
		<div class="main-header-content inner">
			<h1 class="post-title">Remote Control Robote</h1>
			<div class="entry-title-divider">
				<span></span><span></span><span></span>
			</div>
			<h2 class="page-description">Graduation Project</h2>
		</div>
	</div>
	</header>
	<main id="content" class="content_control" role="main">
		<div class="input_rosUrl">
			<div class="url_text">
				<h4>Connection url: </h4>
			</div>
			<div class="input_url">
				<input type="text" id="url" value="192.168.100.165">
			</div>
			<button class="url_button" onclick="url_btn_clicked()">Enter</button>
			
		</div>

		<div class="main_content">
			<h2>Slam</h2>
			<div class="rviz_div">
				<div class="rviz" id="rviz">
					<content id="map" style="position: absolute; top: 0; right: 0; bottom: 0; left: 0; background-color: rgb(171, 171, 175);"></content>
				</div>
			</div>
		</div>
		<div class="side_content">
			<div>
				<h2>Control</h2>
			</div>
			<div class="btn_container">
				<div class="table">
					<div class="table_row_group">
						<div class="tr">
							<div class="th"></div>
							<div class="th">
								<button class="align_center move_btn" onclick="forward_2()"><img src="assets/img/go.png" class="btn_image"></button>
							</div>
							<div class="th"></div>
						</div>
						<div class="tr">
							<div class="th">	
								<button class="left_btn move_btn" onclick="left_2()"><img src="assets/img/left.png" class="btn_image"></button>
							</div>
							<div class="th">
								<button class="move_btn" onclick="stop_2()"><img src="assets/img/stop.png" class="btn_image"></button>
							</div>
							<div class="th">
								<button class="right_btn move_btn" onclick="right_2()"><img src="assets/img/right.png" class="btn_image"></button>
							</div>
						</div>
						<div class="tr">
							<div class="th"></div>
							<div class="th">
								<button class="move_btn" onclick="back_2()"><img src="assets/img/back.png" class="btn_image"></button>
							</div>
							<div class="th"></div>
						</div>
					</div>
				</div>
			</div>

			<h2>Destination</h2>
			<button class="move_button" onclick="go_home()" type="button">
				Home
			</button>

			<button class="move_button" onclick="go_A()" type="button">
				A room
			</button>
   
			<button class="move_button" onclick="go_B()" type="button">
			   B room
		   </button>
   
		   <button class="move_button" onclick="go_C()" type="button">
			   C room
		   </button>
   

			<h2>Camera</h2>
			<div class="camera_div">
				<div class="camera">
					<img src="assets/img/turtlebot_img.png" id="camera_id" class="camera_img">
				</div>
				
			</div>
		</div>
	</main>




	<footer class="site-footer clearfix">
		<a href="#top" id="back-to-top" class="back-top"></a>
		<div class="text-center">
			<a href="../index.html">ROS Web Interface</a> &copy; 2021
		</div>
	</footer>
</div>
<style>
	input[type="text"] {
		height: auto;
		width: 300px;
		height: 35px;
		font-size: 20px;
		border-radius: 20px;
		border: 2px solid #b9b2b2;
		padding-left: 20px;
	}
	input:focus {
		outline:none;
	}
	@media only screen and (max-width:900px) {
		input[type="text"] {
		height: auto;
		width: 220px;
		height: 35px;
		font-size: 17px;
		border-radius: 20px;
		border: 2px solid #b9b2b2;
		padding-left: 20px;
		}
	}
	@media only screen and (max-width:685px) {
		input[type="text"] {
		height: auto;
		width: 320px;
		height: 35px;
		font-size: 17px;
		border-radius: 20px;
		border: 2px solid #b9b2b2;
		padding-left: 30px;
		}
	}
	@media only screen and (max-width:500px) {
		input[type="text"] {
		height: auto;
		width: 180px;
		height: 35px;
		font-size: 15px;
		border-radius: 20px;
		border: 2px solid #b9b2b2;
		padding-left: 20px;
		}
	}



</style>

<script type="text/javascript" src="https://code.jquery.com/jquery-1.11.3.min.js"></script>
<script type="text/javascript" src="assets/js/masonry.min.js"></script>
<script type="text/javascript" src="assets/js/jquery.fitvids.js"></script>
<script type="text/javascript" src="assets/js/index.js"></script>
<script type="text/javascript" src="http://static.robotwebtools.org/EaselJS/current/easeljs.min.js"></script>
<script type="text/javascript" src="http://static.robotwebtools.org/EventEmitter2/current/eventemitter2.min.js"></script>
<script type="text/javascript" src="http://static.robotwebtools.org/roslibjs/current/roslib.min.js"></script>
<script type="text/javascript" src="http://static.robotwebtools.org/ros2djs/current/ros2d.min.js"></script>
<script type="text/javascript" src="http://static.robotwebtools.org/nav2djs/current/nav2d.min.js"></script>

<script type="text/javascript" src="http://static.robotwebtools.org/keyboardteleopjs/current/keyboardteleop.min.js"></script>


<script type="text/javascript">
//http://192.168.100.165:8080/stream?topic=/raspicam_node/image
var robot_2_Cmd;
var turtlebot_gohome
var ros

	// Connecting to ROS
	// ------------------
	function ros_start(url_address) {
		var ros = new ROSLIB.Ros({
		url : url_address
		});
		ros.on('connection', function(){
			console.log('Connected to websocket server.');
		});
		
		ros.on('error', function(error){
			console.log('Error connecting to websocket server:', error);
		});
		
		ros.on('close', function(){
			console.log('Connected to websocket server closed.');
		});
		
		// Publishing Topic "to_robot2_cmd"
		// ------------------
		robot_2_Cmd = new ROSLIB.Topic({
			ros : ros,
			name : 'to_robot2_cmd',
			messageType : 'std_msgs/String'
		});

		turtlebot_gohome = new ROSLIB.Topic({
		ros : ros,
		name : '/gohome',
		messageType : 'std_msgs/String'
		});
		
		turtlebot_goA = new ROSLIB.Topic({
		ros : ros,
		name : '/goA',
		messageType : 'std_msgs/String'
		});

		turtlebot_goB = new ROSLIB.Topic({
		ros : ros,
		name : '/goB',
		messageType : 'std_msgs/String'
		});

		turtlebot_goC = new ROSLIB.Topic({
		ros : ros,
		name : '/goC',
		messageType : 'std_msgs/String'
		});

		var width_div = document.getElementById("rviz").clientWidth;
		var height_div = document.getElementById("rviz").clientHeight;
		// Create the main viewer.
		var viewer = new ROS2D.Viewer({
			divID : 'map',
			width : width_div,
			height : height_div
		});

		// Setup the nav client.
		var nav = NAV2D.OccupancyGridClientNav({
			ros : ros,
			rootObject : viewer.scene,
			viewer : viewer,
			serverName : '/move_base'
		});

	}
	
	
	function forward_2() {
		var cmd = new ROSLIB.Message({
			data : 'forward'
		});
		console.log("clicked forward button");
		robot_2_Cmd.publish(cmd);
	}

	function back_2() {
		var cmd = new ROSLIB.Message({
			data : 'back'
		});
		console.log("clicked back button");
		robot_2_Cmd.publish(cmd);
	}
	function left_2() {
		var cmd = new ROSLIB.Message({
			data : 'left'
		});
		console.log("clicked left button");
		robot_2_Cmd.publish(cmd);
	}
	function right_2() {
		var cmd = new ROSLIB.Message({
			data : 'right'
		});
		console.log("clicked right button");
		robot_2_Cmd.publish(cmd);
	}
	function home_2() {
		var cmd = new ROSLIB.Message({
			data : 'home'
		});
		robot_2_Cmd.publish(cmd);
	}
	function stop_2() {
		var cmd = new ROSLIB.Message({
			data : 'stop'
		});
		console.log("clicked stop button");
		robot_2_Cmd.publish(cmd);
	}

	function url_btn_clicked() {
		var url_address = document.getElementById("url").value;
		var camera_url = "http://" + url_address + ":8080/stream?topic=/raspicam_node/image";
		url_address = "ws://" + url_address + ":9090";
		ros_start(url_address);
		console.log(url_address);
		console.log(camera_url);
		document.getElementById("camera_id").src = camera_url;
	}	

	
	function go_home() {
        var home = new ROSLIB.Message({
            data : 'gohome'
        });
        turtlebot_gohome.publish(home);
     }

   function go_A() {
        var A = new ROSLIB.Message({
            data : 'goA'
        });
        turtlebot_goA.publish(A);
     }

   function go_B() {
        var B = new ROSLIB.Message({
            data : 'goB'
        });
        turtlebot_goB.publish(B);
     }

   function go_C() {
        var C = new ROSLIB.Message({
            data : 'goC'
        });
        turtlebot_goC.publish(C);
     }
	</script>

</body>
</html>
